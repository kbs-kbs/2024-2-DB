# 02. 데이터베이스 시스템
## 데이터베이스 시스템의 구성 요소

1. DBMS
2. 데이터 모델
3. 데이터베이스
4. 데이터베이스 언어
5. DB 서버
6. 사용자

## 1. DBMS
### DBMS 필수 기능 3

1. **정의 기능**: 데이터 구조 생성, 수정, 삭제
2. **조작 기능**: 데이터 추가, 수정, 삭제, 선택
3. **제어 기능**: 데이터 제약 조건, 권한 설정

### DBMS 구성 요소 3

1. **질의 처리기**
2. **런타임 데이터베이스 처리기**
   - 트랜젝션 관리기
3. **데이터 저장 관리기**
   - 버퍼 관리기
   - 파일 관리기

### 트랜젝션

송금 시 출금과 입금이 하나의 트랜젝션

**트랜젝션의 특징 4**

1. **원자성**: 두 단계가 하나 (출금 실패시 입금 안됨)
2. **일관성**: 받는 데이터와 주는 데이터가 일치
3. **고립성**: 다른 트랜젝션의 영향 받지 않음
4. **지속성**: 트랜젝션 후 결과는 영구 반영

## 2. 데이터 모델
### 데이터 모델의 종류와 특징

|구분|계층형|네트워크형|관계형|객체 지향형|객체 관계형|
|---|---|---|---|---|---|
|연관 관계|포인터|포인터|키 열|OID(객체 식별자)||
|계층 구조|트리|네트워크||||
|구조|1:n|m:n||||
|특징||||현실과 유사, 상속, 캡슐화|관계형 + 객체 기능|

### 데이터 모델에 따른 DBMS

|세대|데이터 모델|데이터베이스|DBMS|예|
|---|---|---|---|---|
|1|계층형|HDB|HDBMS||
||네트워크형|NDB|NDBMS||
|2|관계형|RDB(SQL DB)|RDBMS|MySQL, PostgreSQL|
|3|객체 지향형|OODB|OODBMS||
||객체 관계형|ORDB|ORDBMS||
|4|비관계형|NoSQL DB|NoSQL DBMS|MongoDB|

## 3. 데이터베이스
### DB 구성 요소
- **사용자 DB**
- **시스템 DB**: 메타 데이터, DBMS가 자동 관리
  1. **데이터 디렉토리**: 사용자 접근 불가, 데이터의 위치 정보
  2. **데이터 사전**: 사용자 검색 가능, 데이터베이스의 모든 부가 정보


### 3단계 데이터베이스
응용 프로그램과 데이터 사이의 독립성을 제공

1. 외부 단계
2. 개념 단계
3. 내부 단계

### 스키마

데이터 사전에 정의된 데이터베이스 구조(정적)와 제약 조건(동적)

예) `학생(학번, 이름, 학년, 성별)`

### 스키마의 종류 3
1. **외부 스키마**:
   - 데이터베이스가 가지는 컬럼들의 부분집합(뷰)의 메타데이터
   - 하나의 데이터베이스에 여러 개의 외부 스키마 존재
2. **개념 스키마**:
   - 데이터베이스 전체(테이블 간의 관계)의 메타데이터
   - 하나의 데이터베이스에 하나의 개념 스키마 존재
   - 스키마는 보통 개념 스키마를 의미
3. **내부 스키마**:
   - 데이터베이스의 내부 구조(속성명, 자료형, 인덱스 유무)에 대한 메타데이터
   - 하나의 데이터베이스에 하나의 내부 스키마 존재
   - 물리적 저장 방식보다는 추상화된 코드



## 4. 데이터베이스 언어
### SQL

표준 데이터베이스 언어

### DB 언어 종류 3

1. **데이터 정의어(DDL)**: `CREATE`, `ALTER`, `DROP`
2. **데이터 조작어(DML)**: `INSERT`, `UPDATE`, `DELETE`, `SELECT`
3. **데이터 제어어(DCL)**: `GRANT`, `REVOKE`, `COMMIT`, `ROLLBACK`



## 5. DB 서버

서버 안에 DB와 DBMS가 물리적으로 저장

## 6. 사용자
### 사용자의 종류 3
1. **일반 사용자(end user)**
   - 초급 사용자: DML 사용 불가
   - 중급 사용자: DML 사용 가능
2. **응용 프로그래머**
3. **데이터베이스 관리자(DBA, super user)**

### 사용자 유형별 숙련도

|구분|초급 사용자|중급 사용자|응용 프로그래머|데이터베이스 관리자|
|---|---|---|---|---|
|프로그래밍|X|X|O|△|
|모델링|X|X|△|O|
|DBMS|X|△|△|O|
|SQL|X|△|O|O|
|DBMS 기능|조작 기능|조작 기능|정의, 조작 기능|정의, 조작, 제어 기능|
|DB 언어||DML|DDL, DML|DDL, DML, DCL|

### DBA의 주 역할 10

1. DBS의 구성 요소 결정
2. 구조 정의
3. 물리적 저장 구조와 접근 방식 결정
4. 무결성을 위한 제약 조건 정의
5. 보안 및 접근 권한 정책 결정
6. 백업 및 회복 기법 정의
7. 시스템 데이터베이스 관리
8. 시스템 성능 감시 및 분석
9. 데이터베이스 재구성
10. 데이터베이스 관련 의견 조정과 분쟁 해결



## 뷰의 장점 4
1. 편의성
2. 보안성
3. 재사용성
4. 독립성

개념 스키마: 보통 이것을 스키마라 부름
데이터베이스가 가지는 정보들을 정의

외부 스키마: 데이터베이스가 가지는 컬럼들의 부분집합(표)을 정의

내부 스키마: 전체 데이터베이스의 내부 구조를 정의
컬럼의 이름, 자료형, 인덱스 유무 등을 정의

dbms의 데이터 독립성 제공
유저네임이라는 컬럼명(내부 스키마)을 네임으로 바구면 어플리케이션 (외부스키마)에 빨간줄 그음.




30개

dbms 장점
- 데이터의 표준화
- 데이터의 일관성
- 데이터의 무결성

db 스키마 구조
내부, 외부, 개념스키마

dbms 필수 기능
ddl(정의), dml(조작), dcl(제어)

카디널리티 5 차수 5 x 카디널리티 3 차수 3 = 카디널리티 15 차수 8

속성을 갖는 2차원 테이블 = 릴레이션
열 = 속성
행 = 튜플
열 개수 = 차수
행 개수 = 카디널리티

select 이름 from 학생
where 학년 = (1, 2, 3, 4); -- (x) in (1, 2, 3, 4) (o)

= null (x)
is null (o)

order 학년 (x) order by 학년 (o)

where 이름 like '한%' (o)

다음 학생 테이블에 대해 1학년부터 4학년 순으로 학년별 평균 성적을 검색하라.

select (학년) (AVG) (성적) from 학생
(group by) 학년
(order by) 학년 ASC

뷰는 create view 로 생성가능 o
alter view로 삭제가능 x
뷰 안에서 select 로 검색가능 o
물리적으로 저장 x
삭제해도 기반 릴레이션 영향 x
뷰 갱신 삭제 제약이 있음 o
뷰를 기반으로 뷰 생성 o
뷰는 데이터의 보안 유지 o

데이터베이스 사용자 초급, 중급, 응용프로그래머 3가지 (x) 관리자까지 (o)
스키마는 정적 구성 뿐만 아니라 동적 유지조건 o
디비 하나에 여러개의 외부스키마 o
한차원 높은 데이터 메타데이터 o
스키마 간의 사상 통해 독립성 지원 o

튜플의 유일성
튜플의 무순서성
속성의 무순서성
속성의 원자성


